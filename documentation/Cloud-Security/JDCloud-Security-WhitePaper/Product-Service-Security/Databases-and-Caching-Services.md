# 4. 云数据库与缓存服务

## 4.1 云数据库 MySQL

云数据库 MySQL 是京东云基于全球广受欢迎的 MySQL 数据库提供的稳定可靠的云数据库服务。云数据库 MySQL 易于部署、管理和扩展，默认支持主从热备架构，提供数据备份、故障恢复、监控等全套解决方案。

· 高可用性

默认支持主从热备架构，故障自动转移，提供持续性的数据库访问，拥有完善的数据自动备份机制，每个实例默认每天自动备份一次，同时可根据业务情况手动创建备份，无需担心数据丢失。

· 安全模式

默认的云数据库 MySQL 实例采用的是标准模式，支持切换到高安全模式，具备一定的 SQL 拦截能力，同时也提供了 SQL 审计功能。

· 实例容灾

京东云为全球多个地域提供云计算服务，每个地域（Region）都包含多个可用区（AZ）。云数据库 MySQL 默认提供主从高可用架构，支持选择主从副本部署在同一可用区或不同可用区，支持可以承受机架级别的故障的可用区部署和可以承受机房级别的故障多可用区部署。

· 访问控制

设置 IP 白名单控制哪些 IP 地址能够访问 MySQL 数据库，管理员需提前对每个进入数据库的权限进行配置（读写或只读）。云数据库 MySQL 的域名访问地址，只允许内网访问。

## 4.2 云数据库 SQL Server

云数据库 SQL Server 是基于微软的 SQL Server 打造的适合云端的数据库产品，具有：服务高可用，数据高可靠，功能丰富，高效稳定，运维省心等种种优点，是最适合政府、企业及电商的商业级云数据库。

· 身份认证

云数据库 SQL Server 仅支持私有网络，只提供内网连接，公网不可访问。使用云数据库 SQL Server 时需要有云主机。SQL 身份验证，使用用户名和密码。

· 访问控制

设置 IP 白名单控制哪些 IP 地址能够访问 SQL Server 数据库。每个账号只能读写、只读自己的数据库。

· 数据加密

SQL Server 提供内置的加密函数，可以进行数据加密。京东云对云数据库 SQL Server 提供安全可靠的安全加密方式，防止数据库数据泄露、拖库等危害。

· 主备高可用，故障自动切换

提供基于 SQL Server 镜像的一主一备高可用架构，主实例数据实时同步到备实例。发生故障时，系统可自动感知并进行主备切换。切换可在数十秒内完成，切换过程中数据零丢失，应用几乎无感知。

· 安全防护机制

宿主机位于防火墙保护之下，只开放必需的端口，且安装有各种系统补丁，能够抵御各种恶意攻击，保障数据库安全。

SQL Server 实例运行在逻辑隔离的私有网络（VPC）中，避免了数据库直接暴露在公网上，可规避绝大部分攻击。

通过安全组、ACL 规则可定义和强化安全策略，进一步加强数据库的安全性。

· 安全审计

基于 SQL Server 原生审计，可靠性高，审计无遗漏。审计结果为二进制格式，无法篡改。

· 多维度监控，自定义告警

从各个维度提供系统级和数据库实例级的监控，监控指标丰富。可根据监控指标自定义告警规则，并通过短信，email等方式进行通知。

## 4.3 云数据库 MongoDB

云数据库 MongoDB 是京东云基于全球广受欢迎的 MongoDB 提供的高性能 NoSQL 数据库服务，完全兼容 MongoDB 协议，提供三节点副本集的高可用架构，支持容灾切换，故障迁移自动完成，确保业务可用性。

· 安全特性

实例部署在用户自定义的 VPC 私有拟网络内，在 TCP 层直接进行网络隔离保护，确保数据安全性。支持用户自定义 IP 白名单，从访问源进行安全控制。

· 实例容灾

三节点副本集：自动搭建三节点副本集，三个数据节点位于不同的物理服务器上，自动同步数据。

自动容灾：默认 Primary 和 Secondary 节点提供服务，当 Primay 节点出现故障，系统自动选举新的 Primary 节点。 Secondary 节点不可用时，由备用节点接管服务，多重保障服务可用性。

同城容灾：支持多可用区部署方式，主从节点与隐藏节点分布在不同的可用区，可以承受机房级别的故障。

· 备份恢复

自动备份：每天自动全量备份数据并保留 7 天，备份文件以三副本的方式存放在云存储。

手动备份：支持即时手动创建备份，备份数据长期保存。

备份恢复：支持一键恢复备份数据至当前实例；此外支持根据备份创建新的云数据库 MongoBD 实例。

## 4.4 云数据库 Percona

云数据库 Percona 是京东云基于开源的 Percona 5.7 版本构建的稳定可靠的数据库服务。数据库 Percona 易于部署、管理和扩展，默认支持主从热备架构，提供数据备份、故障恢复、监控等全套解决方案。

· 高可靠性

拥有完善的数据自动备份机制，每个实例默认每天自动备份一次，同时可根据业务情况手动创建备份，无需担心数据丢失。

· 高可用性

默认支持主从热备架构，故障自动转移，提供持续性的数据库访问，数据库自动备份和手动备份等功能有效提升数据库可用性。

· 安全模式

默认的云数据库 Percona 实例采用的是标准模式，支持切换到高安全模式，具备一定的 SQL 拦截能力，同时也提供了 SQL 审计功能。

## 4.5 分布式数据库 TiDB

京东云联合 PingCAP 基于国内开源 NewSQL 数据 TiDB 打造的一款同时支持 OLTP 和 OLAP 两种场景的分布式云数据库产品，实现了自动的水平伸缩，强一致性的分布式事务，部署简单，在线异步表结构变更不影响业务，同时兼容 MySQL 协议，使迁移使用成本降到极低。

· 服务高可用性

TiDB 使用多副本进行数据存储，并依赖业界最先进的 Raft 多数派选举算法确保数据 100% 强一致性和高可用。主副本故障时自动切换，无需人工介入，自动保障业务的连续性。

· 访问控制

设置 IP 白名单控制那些 IP 地址能够访问 TiDB 数据库。每个账号只能读写、只读自己的数据库。

## 4.6 缓存 Redis

Redis 是京东云提供的基于 Redis 协议的在线缓存服务，支持主从版、集群版的多种规格供用户选择。可满足多种业务场景对可用性、可靠性和高读写性能的要求，支持双机热备，提供自动容灾切换、实例监控等服务，以降低业务风险，确保业务的连续性。

· 高可用性

双机热备，自动切换。当主节点发生故障后，从节点会被迅速提升为新的主节点，继续提供服务；服务数据持久化，实例跨可用区部署，保证数据的安全和业务的不间断运行。

· 监控告警

为用户提供多种类型的监控，包括如使用量、连接数、QPS、Key 数量等多种监控，可视化数据监控展示。全链路监控预警，帮助用户提前预警提示风险、快速定位和解决问题。

· 访问控制

实例运行在私有网络（VPC）中，增强了安全性和隔离性。提供了子网、访问控制策略等限制访问的功能。
