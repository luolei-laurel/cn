
# 函数调用


## 调用类型

您可以采用 **同步调用** 或 **异步调用** 这2种方式调用函数。

同步调用：事件被函数处理后直接将结果返回。例如：控制台调用、API网关调用是同步调用。

异步调用：事件在写入到消息队列后则返回，客户端不关注请求调用结果。例如：OSS触发器调用是异步调用。

同步 / 异步请求对传入的事件有不同的限制，具体请参考 [限制说明](../../Introduction/Restrictions.md)。

 

## 并发执行

并发执行是指在任意指定时间您的函数代码同时执行的数量。可通过以下公式来估算函数并发数。

**请求速率 * 函数执行时间**

其中，请求速率是指函数被调用的速率，单位为“每秒请求数”或者“每秒事件数”。函数执行时间的单位为“秒”。例如，考虑一个处理京东云一个API网关事件的函数。假定函数平均用时1.5 秒，API网关每秒发布 10 个事件。因此，您的函数有 15 个并发执行。

 

## 安全限制

在某些情况下，由于用户的错误设置，函数执行可能会失控。参考如下场景，您设置了 OSS 触发器，将图片文件上传到 OSS的某个 Bucket 后，会调用相关函数处理。该函数将原图片处理为3种不同尺寸的图片，并将结果错误地写回到了同一个bucket 下。因此又会造成新的函数被调用，无限循环下去。为了避免因为失控函数导致财务损失，函数计算在每个账户粒度设置了并发执行限制，默认为100。您可以通过函数在云监控中的相关指标（Throttles）来观察流控行为。



 

## 重试机制

根据调用方式的不同，对未成功执行的函数的重试机制不同。

同步调用：同步调用的函数执行失败系统不会进行处理。您可以自行重试。

异步调用：如果您的函数异步调用失败，Function会自动重试、等待直至被执行。
